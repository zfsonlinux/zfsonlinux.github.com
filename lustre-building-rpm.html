<html>
<head>
<title>ZFS on Linux</title>
<meta name="keyword" content="zfs, linux"/>
<meta name="description" content="Building Lustre RPM Packages." />
<meta name="robots" content="all" />
</head>
<body>
<center>
<a href="index.html"><img title="Native ZFS on Linux" alt="Native ZFS on Linux" src="images/zfs-linux.png"></a>

<table width=80%>
	<tr>
		<td>
<p>Once the <a href="zfs-building-rpm.html">zfs packages are built
and installed</a> you can build the lustre packages using the standard
autoconf style build system.  By default lustre will attempt to detect
whether support can be enabled for ldiskfs and zfs back-ends.  However,
since we're mainly concerned with zfs, and because ldiskfs requires a
patched kernel it's recommended that you disable ldiskfs support by
passing the <em>--without-ldiskfs</em> configure option.</p>

<p>Finally, you may need to specify full paths to your kernel, spl,
and zfs devel headers if they are not automatically detected.  You
can accomplish this using the <em>--with-linux</em>, <em>--with-spl</em>
and <em>--with-zfs</em> configure options.  Your configure command
should look something like this.</p>

<table bgcolor="eeeeee" width=100%><tr><td><pre>
$ ./configure --without-ldiskfs
$ make rpms
</td></tr></table></pre>

<p>The result of this will be one source rpm package.</p>
<ul>
	<li><em>lustre-w.x.y-z.src.rpm</em></li>
</ul>

<p>And five binary rpm packages for your platform.</p>
<ul>
	<li><em>lustre-w.x.y-z.arch.rpm</em>: The Lustre utilities.</li>
	<li><em>lustre-modules-w.x.y-z_kernel.arch.rpm</em>:
	The Lustre modules for your kernel version.</li>
	<li><em>lustre-source-w.x.y-z_kernel.arch.rpm</em>:
	Full Lustre source</li>
	<li><em>lustre-tests-w.x.y-z_kernel.arch.rpm</em>:
	The Lustre test suite.</li>
	<li><em>lustre-debuginfo-w.x.y-z_kernel.arch.rpm</em>:
	The debuginfo package for the Lustre utilities.</li>
</ul>

<p>Next go ahead and install the packages.</p>

<table bgcolor="eeeeee" width=100%><tr><td><pre>
$ sudo rpm -Uvh *.x86_64.rpm

Preparing...                ########################################### [100%]
   1:lustre-modules         ########################################### [ 20%]
   2:lustre                 ########################################### [ 40%]
   3:lustre-tests           ########################################### [ 60%]
   4:lustre-source          ########################################### [ 80%]
   5:lustre-debuginfo       ########################################### [100%]
</td></tr></table></pre>

<p>Now you are ready to configure lustre for your cluster, or start
by setting up the following <a href="lustre-configure-single.html">
single node example configuration</a>.</p>
		</td>
	</td>
</table>

</center>
</body>
</html>
